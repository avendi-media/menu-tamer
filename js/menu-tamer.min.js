(function(c,b){var a={init:function(){this.settings.init();this.setUpToggleElements();c("#menu-to-edit").bind("sortstop",a.refresh)},settings:{menus:[],init:function(){var f=getUserSetting("menuTamerCollapsed").toString(),d,e;if(/^\d+(s\d+)*/.test(f)){f=f.split("s");for(d in f){e=parseInt(f[d]);if(e){this.menus.push(e)}}}},find:function(e){var d;for(d in this.menus){if(this.menus[d]===e){return d}}return undefined},exists:function(d){return !(this.find(d)===undefined)},add:function(d){d=parseInt(d);if(!this.exists(d)){this.menus.push(d)}this.save()},remove:function(e){e=parseInt(e);var d=this.find(e);if(d===undefined){return}delete this.menus[d];this.save()},save:function(){var d=this.menus.join("s");setUserSetting("menuTamerCollapsed",d)}},refresh:function(){setTimeout(function(){a.setUpToggleElements.call(a)},50)},setUpToggleElements:function(){c(".menuTamerToggle").each(function(d,e){a.setUpToggleElement(e)})},setUpToggleElement:function(d){d=c(d);if(!d.data("menu-tamer-setup")){d.click(this.handleClick);if(this.settings.exists(this.getMenuItemId(d))){d.data("menu-tamer-collapsed",true);this.getMenuItem(d).childMenuItems().hide()}}this.setText(d);if(this.getMenuItem(d).childMenuItems().length){d.removeClass("hidden").addClass("menuTamerActive")}else{d.removeClass("menuTamerActive").addClass("hidden")}d.data("menu-tamer-setup",true)},isCollapsed:function(d){return !!(c(d).data("menu-tamer-collapsed"))},getMenuItemId:function(d){var e=this.getMenuItem(d).attr("id").replace("menu-item-","");return parseInt(e)},setState:function(e){e=c(e);var d=!c(e).data("menu-tamer-collapsed");if(d){this.settings.add(this.getMenuItemId(e))}else{this.settings.remove(this.getMenuItemId(e))}e.data("menu-tamer-collapsed",d)},setText:function(e){var d=this.isCollapsed(e)?b.expand:b.collapse;c(e).text(d)},getMenuItem:function(d){return c(d).closest(".menu-item")},handleClick:function(g){g.preventDefault();var e=this,f=a.getMenuItem(e),d=f.childMenuItems();if(!a.isCollapsed(e)){d.slideUp("fast")}else{d.find(".menuTamerActive").each(function(h,i){if(a.isCollapsed(i)){d=d.not(a.getMenuItem(i).childMenuItems())}});d.slideDown("fast")}a.setState(e);a.setText(e)}};c(document).ready(function(){a.init()})})(jQuery,MenuTamerL10n);